<!DOCTYPE html>
<html>
<head>
    <title>Template Creator</title>
</head>
<body>
    <h2>Create Form Template</h2>
    <label>Form Name:</label><br>
    <input type="text" id="form_name"><br><br>

    <label>Fields:</label><br>
    <input type="text" id="field_input">
    <button onclick="addField()">Add Field</button>

    <ul id="fields-list"></ul>

    <button onclick="submitTemplate()">Save Template</button>
    <p id="message"></p>

    <script>
        const fields = [];

        function addField() {
            const input = document.getElementById('field_input');
            const fieldName = input.value.trim();
            if (fieldName) {
                fields.push(fieldName);
                const li = document.createElement('li');
                li.textContent = fieldName;
                document.getElementById('fields-list').appendChild(li);
                input.value = '';
            }
        }

        function submitTemplate() {
            const formName = document.getElementById('form_name').value.trim();
            if (!formName || fields.length === 0) {
                document.getElementById('message').textContent = 'Please enter form name and at least one field.';
                return;
            }

            fetch('/save_template', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ form_name: formName, fields: fields })
            })
            .then(response => response.json())
            .then(data => {
                document.getElementById('message').textContent = data.message;
            })
            .catch(error => {
                console.error(error);
                document.getElementById('message').textContent = 'Error saving template.';
            });
        }
    </script>
</body>
</html>
